<app-navbar></app-navbar>

<div class="container mt-4">
  <h2 class="mb-4">Gestión de Habitaciones</h2>

  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="isAdmin" class="mb-3">
    <a routerLink="/habitaciones/nueva" class="btn btn-primary">
      <i class="fas fa-plus"></i> Nueva Habitación
    </a>
  </div>

  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Número</th>
          <th>Tipo</th>
          <th>Precio por Noche</th>
          <th>Estado</th>
          <th *ngIf="isAdmin">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let habitacion of habitaciones$ | async">
          <td>{{ habitacion.id }}</td>
          <td>{{ habitacion.numero }}</td>
          <td>{{ habitacion.tipo }}</td>
          <td>S/. {{ habitacion.precioPorNoche | number:'1.2-2' }}</td>
          <td>{{ habitacion.estado }}</td>
          <td *ngIf="isAdmin">
            <a routerLink="/habitaciones/editar/{{ habitacion.id }}" class="btn btn-primary btn-sm me-2">
              <i class="fas fa-edit"></i> Editar
            </a>
            <button class="btn btn-warning btn-sm" (click)="eliminarHabitacion(habitacion.id)">
              <i class="fas fa-trash-alt"></i> Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="(habitaciones$ | async)?.length === 0" class="alert alert-info">
      No hay habitaciones registradas.
    </div>
  </div>
</div>

